@using _0_Framework.Application
@using _0_Framework.Application.AuthHelper
@using _0_Framework.Application.Categoreis
@using _0_Framework.Infrastructure
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model KamionLandQuery.Contracts.Menu.MenuViewMOdel
@inject IAuthHelper _AuthHelper
<div class="header-top">
    <div class="container">
        <div class="header-left">
            <a href="tel_3A#"><i class="icon-phone"></i>تلفن تماس : 09150093140</a>
        </div><!-- End .header-left -->

        <div class="header-right">

            <ul class="top-menu">
                <li>
                    <a href="#">لینک ها</a>
                    <ul>
                        <li>
                            @if (!_AuthHelper.IsAuthenticated())
                            {
                                <ul>

                                    <li><a href="/Account/Index">ورود / ثبت نام</a></li>
                                </ul>
                            }
                            else
                            {
                                <ul>

                                    <li>
                                        @if (_AuthHelper.CurrentAccountInfo().RoleId == Convert.ToInt64(Roles.Administrator))
                                        {
                                            <a href="/Admin/Dashboard">@_AuthHelper.CurrentAccountInfo().Fullname</a>

                                        }
                                        
                                        / <a asp-page="/Account/Index" asp-page-handler="Logout"> خروج</a>


                                    </li>
                                </ul>
                            }


                        </li>

                    </ul>
                </li>
            </ul><!-- End .top-menu -->
        </div><!-- End .header-right -->

    </div><!-- End .container -->
</div><!-- End .header-top -->

<div class="header-middle">
    <div class="container">
        <div class="header-left">
            <button class="mobile-menu-toggler">
                <span class="sr-only">فهرست</span>
                <i class="icon-bars"></i>
            </button>

            <a href="index-1.html" class="logo">
                <img src="~/Pictures/logo/logo copy.jpg" alt="Molla Logo" width="105" height="25">
            </a>
        </div><!-- End .header-left -->

        <div class="header-right">

           @*  <div class="header-search header-search-extended header-search-visible header-search-no-radius">
                <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                <form action="#" method="get">
                    <div class="header-search-wrapper search-wrapper-wide">
                        <label for="q" class="sr-only">جستجو</label>
                        <input type="search" class="form-control" name="q" id="q"
                               placeholder="جستجوی محصول ..." required>

                        <div class="select-custom">
                            <select id="cat" name="cat">
                                <option value="">همه دسته ها</option>
                                <option value="1">مد</option>
                                <option value="2">- زنانه</option>
                                <option value="3">- مردانه</option>
                                <option value="5">- مد کودکان</option>
                                <option value="6">الکترونیک</option>
                                <option value="7">- تلویزیون</option>
                                <option value="8">- دوربین ها</option>
                                <option value="9">- بازی ها</option>
                            </select>
                        </div><!-- End .select-custom -->
                        <button class="btn btn-primary" type="submit"><i class="icon-search"></i></button>
                    </div><!-- End .header-search-wrapper -->
                </form>
            </div><!-- End .header-search -->
 *@

            @if (_AuthHelper.IsAuthenticated())
            {
                <div class="header-dropdown-link">
                    <div class="account">
                        @if (_AuthHelper.CurrentAccountInfo().RoleId == Convert.ToInt64(Roles.Administrator))
                        {
                            <a href="/Admin/Dashboard" title="پروفایل من">
                                <div class="icon">
                                    <i class="icon-user"></i>
                                </div>
                                <p>حساب کاربری</p>
                              
                            </a>

                        }
                       

                    </div>



                </div>

            }
           
        </div>
    </div>
</div>
@if (Model != null)
{
    <div class="header-bottom sticky-header">
        <div class="container">
            <div style="background-color: #333; display: flex; width: 100%;">
                <div class="header-left">
                    <div class="dropdown category-dropdown">
                        <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false" data-display="static"
                           title="دسته بندی امین الله">
                            دسته بندی های امین الله
                        </a>
                        <div class="dropdown-menu">
                            <nav class="side-nav">
                                <ul class="menu-vertical">
                                    <li></li>
                                    @foreach (var menu in @Model.siteCategorys.Where(x => x.ParentId == 0 || x.ParentId == null))
                                    {
                                        <li>
                                            <a asp-page="/superpage/Index" asp-route-Slug="@menu.Slug">@menu.Name</a>
                                            @if (Model.siteCategorys.Any(x => x.ParentId == menu.Id))
                                            {
                                                <ul>
                                                    @foreach (var subsitecategory in @Model.siteCategorys.Where(x => x.ParentId == menu.Id).ToList())
                                                    {
                                                        <li>
                                                            <a asp-page="/superpage/Index" asp-route-Slug="@subsitecategory.Slug">@subsitecategory.Name</a>
                                                            @if (Model.siteCategorys.Any(x => x.ParentId == subsitecategory.Id))
                                                            {
                                                                <ul>
                                                                    @foreach (var sub in @Model.siteCategorys.Where(x => x.ParentId == subsitecategory.Id))
                                                                    {
                                                                        <li>
                                                                            <a asp-page="/superpage/Index" asp-route-Slug="@sub.Slug">@sub.Name</a>

                                                                        </li>
                                                                    }
                                                                </ul>
                                                            }
                                                        </li>
                                                    }
                                                </ul>
                                            }

                                        </li>
                                    }
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>

                <div class="header-left">
                    <nav class="main-nav">
                        <ul class="menu sf-arrows sf-js-enabled" style="touch-action: pan-y;">
                            <li>
                                <a href="~/Index">خانه</a>

                            </li>
                            @foreach (var category in @Model.siteCategorys.Where(x => x.ParentId == 0 || x.ParentId == null))
                            {
                                <li>
                                    <a asp-page="/superpage/Index" asp-route-Slug="@category.Slug">@category.Name</a>
                                </li>
                            }

                        </ul>
                    </nav>
                </div>

            </div>
        </div>
    </div>




}
